function masteriyo_select_single_course_page_tab(e,t){jQuery(".masteriyo-single-course--main__content .masteriyo-tab.active-tab").removeClass("active-tab"),jQuery(".masteriyo-single-course--main__content .tab-content").addClass("masteriyo-hidden"),jQuery(e.target).addClass("active-tab"),jQuery(".masteriyo-single-course--main__content "+t).removeClass("masteriyo-hidden"),"#overview"===t&&setTimeout(()=>{document.querySelector("#masteriyo-custom-fields").initialized||(initCustomFieldsRenderer(),document.querySelector("#masteriyo-custom-fields").initialized=!0)},50)}function masteriyoSelectSingleCoursePageTabById(e){e=jQuery(e.target),e.closest(".masteriyo-single-body__main--tabbar").find(".active-item").removeClass("active-item"),e.addClass("active-item"),e=e.data("tab-id"),e=jQuery("#"+e);e.closest(".masteriyo-single-body__main--content").children().addClass("masteriyo-hidden"),e.removeClass("masteriyo-hidden")}function initCustomFieldsRenderer(){var e=document.getElementById("masteriyo-course-values")?.textContent;if(e){let t=!1;if(!t){let i=document.querySelector(".custom-fields-container"),s=JSON.parse(e);if(!o()){let e=setInterval(()=>{o()&&clearInterval(e)},100)}function n(e){return"string"==typeof e?e.replace(/\n/g,"<br>"):e}function o(){var e;if(window.customFieldRegistry)return e=window.customFieldRegistry.getFields("Basic","all"),e.sort((e,t)=>(e.priority||0)-(t.priority||0)).forEach(e=>{var t=s[e.name]??"";i.insertAdjacentHTML("beforeend",function(e,t){let i="",s=!1,o=!1;switch(e.type){case"select":var r=e.options.find(e=>e.value===t?.value);i=r?.label||"";break;case"radio":r=e.options.find(e=>e.value===t);i=r?.label||"";break;case"checkbox":case"switch":i=t?"Yes":"No",o=!0;break;case"password":i="•".repeat(t?.length||0),s=!0;break;default:i=t}if(function(e){return null==e||!e&&!1!==e&&0!==e}(i))return"";var a="textarea"===e.type&&"string"==typeof i&&80<i.length;return`
		<div class="masteriyo-field" data-type="${e.type}">
			<div class="field-header">
				<span class="field-label">${e.label} </span>
				<div class="field-value">
					${o?`
						<span class="boolean-indicator ${t?"yes":"no"}">
							${t?"✓":"✕"}
						</span>
						<span class="boolean-text">${i}</span>
					`:""}
					${s?`
						<span class="password-display">${i}</span>
						<button class="toggle-password" data-value="${t}">
							Show
						</button>
					`:""}
					${["select","radio"].includes(e.type)?`
						<span class="option-badge">${i}</span>
					`:""}
					${o||s||["select","radio"].includes(e.type)?"":a?`
									<span class="text-value">
										<span class="truncated-text">${n(i.substring(0,80)+"...")}</span>
										<span class="full-text" style="display: none;">${n(i)}</span>
										<p class="see-more-less">See more</p>
									</span>
								`:`
									<span class="text-value">${n(i)}</span>
								`}
				</div>
			</div>
		</div>
	`}(e,t))}),document.querySelectorAll(".toggle-password").forEach(i=>{i.addEventListener("click",e=>{e.preventDefault();var e=i.previousElementSibling,t=i.dataset.value;e.textContent===t?(e.textContent="•".repeat(t.length),i.textContent="Show"):(e.textContent=t,i.textContent="Hide")})}),document.querySelectorAll(".see-more-less").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.closest(".text-value"),t=e.querySelector(".truncated-text"),e=e.querySelector(".full-text");"none"===t.style.display?(t.style.display="",e.style.display="none",this.textContent="See more"):(t.style.display="none",e.style.display="",this.textContent="See less")})}),t=!0}}}}!function(c,l){var a=function(e,t){e=l.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;t.force_delete?e+="?force_delete=true":e+="?force_delete=false",c.ajax({type:"delete",headers:{"X-WP-Nonce":l.nonce},url:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},r=function(e,t){var i=l.rootApiUrl+"masteriyo/v1/courses/reviews";c.ajax({type:"post",headers:{"X-WP-Nonce":l.nonce},url:i,data:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},n=function(e,t,i){e=l.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;c.ajax({type:"put",headers:{"X-WP-Nonce":l.nonce},url:e,data:t,success:i.onSuccess,error:i.onError,complete:i.onComplete})},d=function(e,t){c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_reviews_infinite_loading",nonce:l.reviews_listing_nonce,page:e.page,search:e.search,rating:e.rating,course_id:l.course_id},url:l.ajaxURL,success:t.onSuccess,error:t.onError,complete:t.onComplete})},t=function(){c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_complete",nonce:l.course_complete_nonce,course_id:l.course_id},url:l.ajaxURL,success:function(e){e.success&&location.reload()},error:function(e,t,i){console.log(e)}})},u=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-danger-msg"><span>'+e+"</span></div>"},m=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-success-msg"><span>'+e+"</span></div>"},y=function(e){e.find(".masteriyo-notify-message").remove()},p=function(e){for(e=""===e?0:e,e=parseFloat(e),html="",e=(e=e>(max_rating=l.max_course_rating)?max_rating:e)<0?0:e,stars=l.rating_indicator_markup,rating_floor=Math.floor(e),i=1;i<=rating_floor;i++)html+=stars.full_star;for(rating_floor<e&&(html+=stars.half_star),rating_ceil=Math.ceil(e),i=rating_ceil;i<max_rating;i++)html+=stars.empty_star;return html},f=function(t={}){c(document.body).append(c(".masteriyo-confirm-delete-course-review-modal-content").html()),c(".masteriyo-modal-confirm-delete-course-review .masteriyo-cancel").on("click",function(){c(this).closest(".masteriyo-overlay").remove()}),c(".masteriyo-modal-confirm-delete-course-review .masteriyo-delete").on("click",function(){var e=c(this).closest(".masteriyo-overlay");e.find(".masteriyo-cancel").attr("disabled",!0),c(this).text(l.labels.deleting),"function"==typeof t.onConfirm&&t.onConfirm(function(){e.remove()})})},_={$create_review_form:c(".masteriyo-submit-review-form"),create_review_form_class:".masteriyo-submit-review-form",init:function(){c(document).ready(function(){_.init_sticky_sidebar(),_.init_rating_widget(),_.init_course_reviews_menu(),_.init_curriculum_accordions_handler(),_.init_create_reviews_handler(),_.init_edit_reviews_handler(),_.init_delete_reviews_handler(),_.init_reply_btn_handler(),_.init_course_reviews_loader(),_.init_password_projected_form_handler(),_.init_course_retake_handler(),_.init_course_complete_handler(),_.init_course_code_copy(),_.init_layout_1_curriculum_accordions_handler(),_.init_single_course_review_item_visibility()})},init_single_course_review_item_visibility:function(){"yes"!==l.review_form_enabled&&(c(".masteriyo-reply-course-review").hide(),c(".masteriyo-submit-container").hide(),c(".masteriyo-single-body__main--review-form").hide(),c(".masteriyo-single-body__main--review-list-content-reply-btn").hide()),"yes"!==l.current_user_logged_in?c(".masteriyo-login-msg").show():c(".masteriyo-login-msg").hide()},init_course_reviews_menu:function(){c(document.body).on("click",".menu-toggler",function(){0==c(this).siblings(".menu").height()?(c(this).siblings(".menu").height("auto"),c(this).siblings(".menu").css("max-height","999px")):c(this).siblings(".menu").height(0)}),c(".masteriyo-dropdown .menu li").on("click",function(){c(this).closest(".menu").height(0)}),c(document.body).click(function(e){0<c(".masteriyo-dropdown").has(e.target).length||c(".masteriyo-dropdown .menu").height(0)})},init_rating_widget:function(){let s=_.$create_review_form,i=!1,o=null;function r(e){e.find(".masteriyo-rating-input-icon").each(function(t){c(this).off("click").on("click",function(e){e.stopPropagation();e=t+1;o=e,i=!1,s.find('input[name="rating"]').val(e),a(e)})})}function a(e){var t=s.find(".masteriyo-rstar");let i=s.find('input[name="rating"]');0===i.length?(i=c("<input>",{type:"hidden",name:"rating",value:e}),s.append(i)):i.val(e),t.html(p(e)),r(t)}s.on("click",function(e){var t=c(e.target).closest(".masteriyo-rating-input-icon"),e=c(e.target).closest(".masteriyo-rstar");0!==t.length||0!==e.length||i||(a(s.find('input[name="rating"]').val()||0),i=!0,o=null)}),r(s.find(".masteriyo-rstar"))},init_create_reviews_handler:function(){var t=!1;_.$create_review_form.on("submit",function(e){e.preventDefault();var s=_.$create_review_form,o=s.find('button[type="submit"]'),e={title:s.find('input[name="title"]').val(),rating:s.find('input[name="rating"]').val(),content:s.find('[name="content"]').val(),parent:s.find('[name="parent"]').val(),course_id:s.find('[name="course_id"]').val()};t||"yes"===s.data("edit-mode")||(t=!0,o.text(l.labels.submitting),y(s),r(e,{onSuccess:function(){s.append(m(l.labels.submit_success)),s.trigger("reset"),window.location.reload()},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),s.append(u(i)),o.text(l.labels.submit)},onComplete:function(){t=!1}}))})},init_reply_btn_handler:function(){c(document.body).on("click",".masteriyo-reply-course-review, .masteriyo-single-body__main--review-list-content-reply-btn",function(e){e.preventDefault();var e=_.$create_review_form,t=c(this).closest(".masteriyo-course-review"),i=t.data("id"),s=e.find('button[type="submit"]'),t=t.find(".title").data("value");e.find('input[name="title"]').val(""),e.find('input[name="rating"]').val(0),e.find(".masteriyo-rstar").html(p(0)),e.find('[name="content"]').val(""),e.find('[name="parent"]').val(i),s.text(l.labels.submit),c(".masteriyo-form-title").text(l.labels.reply_to+": "+t),e.find(".masteriyo-title, .masteriyo-rating").hide(),e.find('[name="content"]').focus(),c("html, body").animate({scrollTop:e.offset().top},500)})},init_edit_reviews_handler:function(){c(document.body).on("click",".masteriyo-edit-course-review",function(e){e.preventDefault();var e=_.$create_review_form,t=c(this).closest(".masteriyo-course-review"),i=t.data("id"),s=e.find('button[type="submit"]'),o=t.find(".title").data("value"),r=t.find(".rating").data("value"),a=t.find(".content").data("value"),n=t.find('[name="parent"]').val();e.data("edit-mode","yes"),e.data("review-id",i),e.find('input[name="title"]').val(o),e.find('input[name="rating"]').val(r),e.find(".masteriyo-rstar").html(p(r)),e.find('[name="content"]').val(a),e.find('[name="parent"]').val(n),s.text(l.labels.update),(t.is(".is-course-review-reply")?(c(".masteriyo-form-title").text(l.labels.edit_reply),e.find(".masteriyo-title, .masteriyo-rating").hide(),e.find('[name="content"]')):(c(".masteriyo-form-title").text(l.labels.edit_review+": "+o),e.find(".masteriyo-title, .masteriyo-rating").show(),e.find('input[name="title"]'))).focus(),c("html, body").animate({scrollTop:e.offset().top},500)});var i=!1;_.$create_review_form.on("submit",function(e){e.preventDefault();var s=_.$create_review_form,e=s.data("review-id"),o=s.find('button[type="submit"]'),t={title:s.find('input[name="title"]').val(),rating:s.find('input[name="rating"]').val(),content:s.find('[name="content"]').val(),parent:s.find('[name="parent"]').val(),course_id:s.find('[name="course_id"]').val()};i||"yes"!==s.data("edit-mode")||(i=!0,o.text(l.labels.submitting),y(s),n(e,t,{onSuccess:function(){s.append(m(l.labels.update_success)),o.text(l.labels.update),s.trigger("reset"),window.location.reload()},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),s.append(u(i)),o.text(l.labels.update)},onComplete:function(){i=!1}}))})},init_delete_reviews_handler:function(){var r={};c(document.body).on("click",".masteriyo-delete-course-review",function(e){e.preventDefault();var s=c(this).closest(".masteriyo-course-review"),o=c(this),t=s.data("id"),i=c("[name=parent][value="+t+"]");r[t]||f({onConfirm:function(e){r[t]=!0,a(t,{force_delete:0===i.length,onSuccess:function(){var e,t;s.hasClass("is-course-review-reply")?(e=0===s.siblings().length,t=s.closest(".masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists").prev(),e&&t.hasClass("masteriyo-delete-review-notice")&&t.fadeOut(500,function(){c(this).remove()}),s.fadeOut(500,function(){e&&s.closest(".masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists").remove(),c(this).remove()})):(s.next().hasClass("masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists")&&s.after(l.review_deleted_notice),s.remove(),l.course_reviews_count--,l.course_reviews_count<=0&&(c(".masteriyo-stab--treviews").hide(),c(".masteriyo-stab--turating").hide(),c(".masteriyo-course-reviews-filters").hide()))},onError:function(e,t,i){e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),s.append(u(i)),o.find(".text").text(l.labels.delete)},onComplete:function(){r[t]=!1,e()}})}})})},init_course_retake_handler:function(){c(document.body).on("click",".masteriyo-retake-btn",function(e){e.preventDefault(),c(document.body).append(c(".masteriyo-confirm-retake-course-modal-content").html()),c(".masteriyo-modal-confirm-retake-course .masteriyo-cancel").on("click",function(){c(this).closest(".masteriyo-overlay").remove()}),c(".masteriyo-modal-confirm-retake-course .masteriyo-confirm").on("click",function(){window.location.href=l.retake_url,c(this).closest(".masteriyo-overlay").find(".masteriyo-cancel").attr("disabled",!0),c(this).text(l.labels.loading)})})},init_sticky_sidebar:function(){var s=c(".masteriyo-single-course--main").get(0);s&&c(window).scroll(function(){var e=c(window).scrollTop(),t=s.offsetTop,i=t+s.offsetHeight;(t<e&&e<i?!0:!1)?c(".masteriyo-single-course-stick").css({position:"sticky",top:"7.5rem"}):c(".masteriyo-single-course-stick").css({position:"relative",top:"0"})})},init_curriculum_accordions_handler:function(){c(document.body).on("click",".masteriyo-cheader",function(){c(this).parent(".masteriyo-stab--citems").toggleClass("active"),c(".masteriyo-stab--citems").length===c(".masteriyo-stab--citems.active").length&&t(),c(".masteriyo-stab--citems").length===c(".masteriyo-stab--citems").not(".active").length&&i()});var e=!1;function t(){c(".masteriyo-stab--citems").addClass("active"),c(".masteriyo-expand-collapse-all").text(l.labels.collapse_all),e=!1}function i(){c(".masteriyo-stab--citems").removeClass("active"),c(".masteriyo-expand-collapse-all").text(l.labels.expand_all),e=!0}c(document.body).on("click",".masteriyo-expand-collapse-all",function(){(e?t:i)()})},init_course_reviews_loader:function(){var t=!1,i=1,o="";c("button#masteriyo-course-reviews-search-button").on("click",()=>{var e=c("button#masteriyo-course-reviews-search-button");o=e.siblings("input").val()}),c("button.masteriyo-load-more").on("click",function(){var e,s;t||(e=c("select#masteriyo-course-reviews-ratings-select").val(),s=c(this),t=!0,s.text(l.labels.loading),d({page:i+1,search:o,rating:e},{onSuccess:function(e){e.success&&(e.data.view_load_more_button?s.show():s.remove(),i+=1,c(".masteriyo-course-reviews-list").append(e.data.html),c(".masteriyo-single-body__main--review-lists").append(e.data.html),c(".course-reviews .masteriyo-danger-msg").remove())},onError:function(e,t,i){i=(i=e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message?e.responseJSON.data.message:i)||l.labels.see_more_reviews;c(".course-reviews .masteriyo-danger-msg").length||s.after(u(i))},onComplete:function(){t=!1,i>=l.course_review_pages&&s.remove(),s.text(l.labels.see_more_reviews)}}))}),c(document.body).on("click change","button#masteriyo-course-reviews-search-button, select#masteriyo-course-reviews-ratings-select",function(){_.handleCourseReviewSearchAndFilter()}),c("input#masteriyo-course-reviews-search-field").on("keypress",function(e){13===e.which&&_.handleCourseReviewSearchAndFilter()})},handleCourseReviewSearchAndFilter:function(){var s=c("button#masteriyo-course-reviews-search-button"),t=c("button.masteriyo-load-more"),i=s.siblings("input").val(),o=c("select#masteriyo-course-reviews-ratings-select").val();(i||o)&&(isLoadingReviews=!0,currentPage=1,d({page:currentPage,search:i,rating:o},{onSuccess:function(e){e.success&&(searchText=i,rating=o,e.data.view_load_more_button?t.show():t.hide(),c(".masteriyo-course-reviews-list, .masteriyo-single-body__main--review-lists").html(e.data.html),c(".course-reviews .masteriyo-danger-msg").remove())},onError:function(e,t,i){searchText="",rating="",i=(i=e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message?e.responseJSON.data.message:i)||l.labels.see_more_reviews,c(".course-reviews .masteriyo-danger-msg").length||s.parents(".masteriyo-course-reviews-filters, .masteriyo-single-body__main--user-review__search-rating").after(u(i))},onComplete:function(){isLoadingReviews=!1}}))},init_password_projected_form_handler:function(){var e=c(".masteriyo-password-protected"),t=0,i=c("#masteriyoCoursePasswordProtectedModal .masteriyo-submit"),s=i.text(),o=s;function r(e){e.preventDefault(),o=i.data("loading-text"),i.text(o),i.prop("disabled",!0);e=c("#masteriyoPostPassword").val();e?c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_password_protection",nonce:l.password_protected_nonce,password:e,course_id:t},url:l.ajaxURL,success:function(e){o=s,i.text(o),i.prop("disabled",!1),e.success?(c("#masteriyoPostPassword").val(""),c("#passwordError").text(""),c("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden"),e.data&&e.data.start_url&&window.open(e.data.start_url)):e.data&&e.data.message&&c("#passwordError").text(e.data.message).show()},error:function(e){o=s,i.text(o),i.prop("disabled",!1);var t="An error occurred";e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message&&(t=e.responseJSON.data.message),c("#passwordError").text(t).show()}}):l.labels&&l.labels.password_not_empty&&(c("#passwordError").text(l.labels.password_not_empty).show(),o=s,i.text(o),i.prop("disabled",!1))}e.on("click",function(e){e.preventDefault(),t=c(this).attr("href").split("=")[1],c("#masteriyoCoursePasswordProtectedModal").removeClass("masteriyo-hidden")}),c("#masteriyoCoursePasswordProtectedModal .masteriyo-cancel").on("click",function(e){e.preventDefault(),c("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden")}),c("#masteriyoCoursePasswordProtectedModal form").on("submit",function(e){e.preventDefault()}),c("#masteriyoCoursePasswordProtectedModal .masteriyo-submit").on("click",function(e){r(e)}),c("#masteriyoCoursePasswordProtectedModal form").keypress(function(e){13==e.which&&r(e)})},init_course_complete_handler:function(){c(document.body).on("click",".masteriyo-course-complete",function(e){e.preventDefault();e=c(this).data("course-id");t(e)})},init_course_code_copy(){c(document.body).on("click",".copy-button-code",function(e){e.preventDefault();e=c(".masteriyo-copy-this-text").text();navigator.clipboard.writeText(e);c(this).html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path d="m12 15 2 2 4-4"/><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>'),setTimeout(()=>{c(this).html(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
				<path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
			</svg>`)},2e3)})},init_layout_1_curriculum_accordions_handler:function(){var e=c(".masteriyo-single-body__main--curriculum-content-bottom__accordion--header"),s=c(".masteriyo-single-body__main--curriculum-content-top--expand-btn"),o=c(".masteriyo-single-body__main--curriculum-content-bottom__accordion");e.on("click",function(){c(this).parent(".masteriyo-single-body__main--curriculum-content-bottom__accordion").toggleClass("active")}),s.on("click",function(){var e=s.data("expanded"),t=s.data("collapse-all-text"),i=s.data("expand-all-text");e?(o.removeClass("active"),s.data("expanded",!1).text(i)):(o.addClass("active"),s.data("expanded",!0).text(t))})}};_.init()}(jQuery,window.masteriyo_data),document.addEventListener("DOMContentLoaded",function(){initCustomFieldsRenderer()});