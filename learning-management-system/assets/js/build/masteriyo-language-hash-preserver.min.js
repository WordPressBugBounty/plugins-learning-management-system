class LanguageHashPreserver{constructor(e={}){this.storageKey=e.storageKey||"tp_react_hash",this.linkSelectors=e.linkSelectors||[".trp-language-switcher a",".trp-ls-shortcode-language a",".trp-language-switcher-container a"],this.selectSelector=e.selectSelector||"#trp-language-select",this.hash=this.getReactHash(),this.bind(),this.restoreHashWithRetries()}isReactHash(e){return"string"==typeof e&&e.startsWith("#/")}getReactHash(){var e=window.location.hash||"";return this.isReactHash(e)?e:""}saveHash(e){e=e||this.getReactHash()||sessionStorage.getItem(this.storageKey)||"";this.isReactHash(e)&&sessionStorage.setItem(this.storageKey,e)}restoreHashOnce(){var e,t=sessionStorage.getItem(this.storageKey);return!!this.isReactHash(t)&&(!!this.isReactHash(window.location.hash)||(e=window.location.href.replace(/#.*$/,""),history.replaceState(null,"",e+t),this.isReactHash(window.location.hash)))}restoreHashWithRetries(){[0,150,400,900,1800,3e3].forEach(e=>{setTimeout(()=>this.restoreHashOnce(),e)});let e=0,t=setInterval(()=>{(this.restoreHashOnce()||10<e++)&&clearInterval(t)},500)}bind(){jQuery(window).on("hashchange",()=>{this.hash=this.getReactHash(),this.saveHash(this.hash)}),jQuery(window).on("beforeunload pagehide",()=>{this.saveHash()}),jQuery(document).on("click",this.linkSelectors.join(", "),e=>{var t,s=this.getReactHash();s&&(t=(e=jQuery(e.currentTarget)).attr("href")||"")&&!t.includes("#/")&&(t=t.replace(/#.*$/,""),e.attr("href",t+s),this.saveHash(s))}),jQuery(document).on("mousedown touchstart",".select2-selection, .select2-results__option",()=>{this.saveHash()}),jQuery(document).on("change",this.selectSelector,()=>{this.saveHash()}),jQuery(document).on("select2:select",this.selectSelector,()=>{this.saveHash()})}}new LanguageHashPreserver({linkSelectors:[".trp-language-switcher a",".trp-ls-shortcode-language a",".trp-language-switcher-container a"],selectSelector:"#trp-language-select",storageKey:"tp_react_hash"});