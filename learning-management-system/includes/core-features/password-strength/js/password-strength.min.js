let sprintf=wp.i18n["sprintf"];!function(r,a){function t(e){r(".masteriyo-password-strength-response").remove();var t=a.calculatePasswordStrength(e);a.highlightPasswordPolicy(e),a.renderPasswordStrengthMeter(".masteriyo-password-strength-meter",e,t.score),0===e.length?r(".masteriyo-password-strength-information").find("li").css("color",""):(e=a.convertStrengthToText(t.score),t=0===t.score||1===t.score?"danger":"success",e=a.createMessage(e,t),t=r("#password"),a.displayMessage(t,e))}void 0===a.policyList&&(a.policyList=function(e){var t=[];return t.push({label:sprintf(e.i18n.minCharacters,e.minLength),className:"min-length"}),t.push({label:sprintf(e.i18n.maxCharacters,e.maxLength),className:"max-length"}),"low"!==e.strength&&"medium"!==e.strength&&"high"!==e.strength||t.push({label:e.i18n.atLeastOneUppercase,className:"uppercase"}),"medium"!==e.strength&&"high"!==e.strength||t.push({label:e.i18n.atLeastOneNumber,className:"number"}),"high"===e.strength&&t.push({label:e.i18n.atLeastOneSpecial,className:"special-character"}),t}),void 0===a.displayPolicyList&&(a.displayPolicyList=function(e){var t=['<div class="masteriyo-password-strength-information"><ul>'];a.policyList(a).forEach(function(e){t.push('<li class="'+e.className+'">'+e.label+"</li>")}),t.push("</ul></div>"),r(e).after(t.join(""))}),void 0===a.validate&&(a.validate=function(e,t){var s=[];return e.length>=t.minLength?s.push({valid:!0,type:"min-length"}):s.push({valid:!1,type:"min-length"}),e.length<=t.maxLength?s.push({valid:!0,type:"max-length"}):s.push({valid:!1,type:"max-length"}),"low"!==t.strength&&"medium"!==t.strength&&"high"!==t.strength||(e.match(/^(?=.*?[A-Z]).+/)?s.push({valid:!0,type:"uppercase"}):s.push({valid:!1,type:"uppercase"})),"medium"!==t.strength&&"high"!==t.strength||(e.match(/^(?=.*?[\d+]).+/)?s.push({valid:!0,type:"number"}):s.push({valid:!1,type:"number"})),"high"===t.strength&&(e.match(/^(?=.*?[\W+]).+/)?s.push({valid:!0,type:"special-character"}):s.push({valid:!1,type:"special-character"})),{valid:s.reduce(function(e,t){return e&&t.valid},!0),errors:s}}),void 0===a.createMessage&&(a.createMessage=function(e,t){t='<div class="masteriyo-password-strength-response masteriyo-notify-message masteriyo-alert masteriyo-'+t+'-msg">';return t+("<span>"+e+"</span>")+"</div>"}),void 0===a.displayMessage&&(a.displayMessage=function(e,t){a.showStrength&&r(e).after(t)}),void 0===a.calculatePasswordStrength&&(a.calculatePasswordStrength=function(e,t){return zxcvbn(e,t)}),void 0===a.renderPasswordStrengthMeterContainer&&(a.renderPasswordStrengthMeterContainer=function(e){r(e).after('<div class="masteriyo-password-strength-meter"></div>')}),void 0===a.renderPasswordStrengthMeter&&(a.renderPasswordStrengthMeter=function(e,t,s){0===t.length?r(e).attr("class","").addClass("masteriyo-password-strength-meter"):r(e).attr("class","").addClass("masteriyo-password-strength-meter strength-"+s)}),void 0===a.highlightPasswordPolicy&&(a.highlightPasswordPolicy=function(e){a.validate(e,a).errors.forEach(function(e){var t=e.valid?"green":"";r(".masteriyo-password-strength-information ."+e.type).css("color",t)})}),void 0===a.convertStrengthToText&&(a.convertStrengthToText=function(e){var t=a.i18n,s="";switch(e){case 0:s=t.veryWeak;break;case 1:s=t.weak;break;case 2:s=t.good;break;case 3:s=t.strong;break;case 4:s=t.veryStrong;break;default:s=t.veryWeak}return s}),r("#masteriyo-signup--form, #masteriyo-instructor-registration--form, #masteriyo-reset--form").on("submit",function(e){var t=r(this).find("#password").val();a.validate(t,a).valid||e.preventDefault()}),r(document).ready(function(){var e=r("#masteriyo-signup--form, #masteriyo-instructor-registration--form, #masteriyo-reset--form").find("#password");e.length&&""!==e.val().trim()&&t(e.val().trim())}),r("#masteriyo-signup--form, #masteriyo-instructor-registration--form, #masteriyo-reset--form").on("input","#password",function(){t(r(this).val().trim())}),a.displayPolicyList("#masteriyo-signup--form #password"),a.displayPolicyList("#masteriyo-instructor-registration--form #password"),a.displayPolicyList("#masteriyo-reset--form #password"),a.showStrength||a.renderPasswordStrengthMeterContainer("#password")}(jQuery,(window._MASTERIYO_,window._MASTERIYO_PASSWORD_STRENGTH_));